import{r as l,j as h}from"./index-B0DnFx1G.js";import{V as _}from"./visually-hidden-yVmHAfOT.js";import{u as j,a as M}from"./image-BHKI4BDm.js";import{u as S}from"./use-spring-DegSYzPR.js";async function V(e){return new Promise(t=>setTimeout(t,e))}const G="_text_1v07c_2",R="_glyph_1v07c_9",T="_value_1v07c_16",p={text:G,glyph:R,value:T},g=["ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ","ホ","マ","ミ","ム","メ","モ","ヤ","ユ","ヨ","ー","ラ","リ","ル","レ","ロ","ワ","ヰ","ヱ","ヲ","ン","ガ","ギ","グ","ゲ","ゴ","ザ","ジ","ズ","ゼ","ゾ","ダ","ヂ","ヅ","デ","ド","バ","ビ","ブ","ベ","ボ","パ","ピ","プ","ペ","ポ"],r={Glyph:"glyph",Value:"value"};function b(e,t,s){return e.map((i,a)=>{if(a<s)return{type:r.Value,value:i};if(s%1<.5){const n=Math.floor(Math.random()*g.length);return{type:r.Glyph,value:g[n]}}return{type:r.Glyph,value:t[a].value}})}const C=l.memo(({text:e,start:t=!0,delay:s=0,className:i,...a})=>{const n=l.useRef([{type:r.Glyph,value:""}]),m=l.useRef(),y=j(),f=S(0,{stiffness:8,damping:5});return l.useEffect(()=>{const v=m.current,c=e.split(""),d=()=>{const u=n.current.map(o=>`<span class="${p[o.type]}">${o.value}</span>`);v.innerHTML=u.join("")},x=f.on("change",u=>{n.current=b(c,n.current,u),d()});return t&&!y&&(async()=>{await V(s),f.set(c.length)})(),y&&(n.current=c.map((u,o)=>({type:r.Value,value:c[o]})),d()),()=>{x?.()}},[f,y,t,s,e]),h.jsxs("span",{className:M(p.text,i),...a,children:[h.jsx(_,{className:p.label,children:e}),h.jsx("span",{"aria-hidden":!0,className:p.content,ref:m})]})});export{C as D};
